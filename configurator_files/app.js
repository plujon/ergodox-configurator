(function(c,f){c.backToTop=function(a){if(a.length){var d=$(".ico-back-top"),b=$(window);d.on("click",function(a){a.preventDefault();$("html, body").stop().animate({scrollTop:"0px"},250)});b.scroll(function(){a.offset().top>b.scrollTop()?d.fadeOut(300):d.fadeIn(300)})}}})(window.JC.massdrop=window.JC.massdrop||{});(function(c,f){c.chartMaker=function(a,d){var b={width:a.width(),isAbsolute:!1},e={};e.options=$.extend(b,d);e.$container=a;e.$chartItems=a.find(".chart-item");e.init=function(){this.chartSetUp();this.plotChart()};e.chartSetUp=function(){this.$container.wrap("<div class='md-chart chart-horizontal'></div>");this.$chartItems.append("<div class='chart-bar-container' style='width:"+this.options.width+"px;''><div class='chart-bar'></div></div>")};e.plotChart=function(){var a=0;this.options.isAbsolute?
a=Math.max.apply(Math,this.$chartItems.map(function(){return $(this).data("value")})):this.$chartItems.each(function(){a+=$(this).data("value")});for(var b=0,d=this.$chartItems.length;b<d;b++){var c=this.$chartItems[b];$(this.$chartItems[b]).find(".chart-bar").width($.data(c,"value")*e.options.width/a)}};e.init();a.data("chartMaker",e)}})(window.JC.massdrop=window.JC.massdrop||{});Handlebars.registerHelper("returnNumbers",function(c){return this.form_data.replace(/\D/g,"")});
(function(c,f){c.dynamicFormMaker=function(a){var d={tplConfirmDelete_card:Handlebars.compile("<div class='modal-content skinny-content'><h2 class='major'>Delete Card?</h2><p>Are you sure you want to delete the card ending in {{returnNumbers}}?</p><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p></div><div class='modal-footer'><a href='#' class='btn ico-btn ico-btn-delete gutter-right-small btn-submit'data-form_id='{{form_id}}'>Delete credit card</a> or <a href='#close' data-form_id='{{form_id}}' class='close-modal gutter-left-small cancel-action'>Cancel</a></div></div>"),tplConfirmDelete_address:Handlebars.compile("<div class='modal-content skinny-content'><h2 class='major'>Delete Address?</h2><p>Are you sure you want to delete this address?</p>{{{form_data}}}</div><div class='modal-footer'><a href='#' class='btn ico-btn ico-btn-delete gutter-right-small btn-submit' data-form_id='{{form_id}}'>Delete Address</a> or <a href='#close' class='close-modal gutter-left-small cancel-action'data-form_id='{{form_id}}'>Cancel</a></div>"),
tplModalForm:Handlebars.compile("<div class='modal-content full-form-modal' data-content_id='{{form_id}}'><h2 class='major'>Update {{form_type}}?</h2>{{{form_data}}}</div>"),tplPrettyPrice:function(a){a=(a+"").split(".");return"<sup>$</sup>"+a[0]+"<sup>"+a[1]+"</sup>"}},b=a.find("form"),e,l={},n,g;e=function(a){l[a]=Handlebars.compile(document.getElementById(a).innerHTML);return l[a]};n=function(a,b){var e={};a.each(function(a,b){var d=$(b);d.hasClass("check-box-data")?e[d.data("name")]=!0:e[d.data("name")]=
d.text().trim()});b.data("field_data",e);return e};g=function(a,b){a.find("select").each(function(a,e){var d=$(this).attr("name"),d=b.find(".data-"+d).text();$(this).find("option[value='"+d+"']").prop("selected",!0)});a.find(".radio-group").each(function(a,d){var e=$(this),c=e.find("input[type='radio']").first().attr("name"),c=b.find(".data-"+c).data("value");e.find("input[value='"+c+"']").prop("checked",!0)});a.find("input[type='checkbox']").each(function(a,b){$(b);$(b).data("checked")&&(b.checked=
!0)})};a.on("click",".create-form",function(b){b.preventDefault();b=$(b.currentTarget);var m=b.data("tpl_form"),m=l[m]||e(m);$formContainer=a.find(".page-actions");var f={};b.hasClass("trigger-edit-form")&&(console.log("edit form triggered"),b.data("form-data")?(console.log("using a specific form-data elm"),$formContainer=$(document.getElementById(b.data("form-data")))):$formContainer=b.closest(".form-data"),f=$formContainer.find(".data-field"),f=$formContainer.data("field_data")||n(f,$formContainer),
formID=$formContainer.attr("id")||$formContainer.data("form_id"),$.extend(f,{edit:!0,item_id:formID}));b.hasClass("create-modal-form")?(c.modalWindows.loadFormModal(d.tplModalForm({form_data:m(f),form_type:$formContainer.data("type"),item_id:formID}),a),g($(".modal-content"),$formContainer),$formContainer=$("#colorbox").find("form")):($formContent=$(m(f)),f.edit?($formContent=$formContent.find(".editable-content").hide(),g($formContent,$formContainer),b=$formContainer.find(".read-only"),$formContainer.data({"edit-mode":!0,
"editable-content":$formContent,"default-content":b}),$formContainer.addClass("content-animating"),b.fadeOut(),$formContent.appendTo($formContainer).fadeIn(function(){$formContainer.removeClass("content-animating")})):$formContent.hide().appendTo($formContainer).fadeIn());a.addClass("form-activated");formHelpers.initializeFormValidation($formContainer);c.initializeToolTips($formContainer.find(".hastip"))});a.on("click",".form-cancel",function(b){b.preventDefault();var e=$(b.currentTarget).closest("form").removeClass("form-activated");
b=e.data();b["edit-mode"]?(e.addClass("content-animating"),b["editable-content"].fadeOut(function(){$(this).remove()}),b["default-content"].fadeIn(function(){e.removeClass("content-animating");a.removeClass("form-activated")}),$.data(e,"edit-mode",!1)):e.fadeOut(function(){a.removeClass("form-activated");e.remove()})});b.on("click",".item-delete-trigger",function(a){a.preventDefault();var b=$(a.currentTarget).closest("form");a=d["tplConfirmDelete_"+b.data("type")];var e=b.find(".item-details").html();
c.modalWindows.loadConfirmModal(a({form_data:e,form_id:b.attr("id")}));b.one("confirm-action",function(a){a.preventDefault();b.find("input.item-delete").val("true");b.submit()})});b.on("click",".item-default-trigger",function(a){a.preventDefault();a=$(a.currentTarget).closest("form");a.find("input.item-default").val("true");a.submit()})}})(window.JC.massdrop=window.JC.massdrop||{});(function(c,f){c.initializeToolTips=function(a,d){a=a||$(".hastip");var b={alignTo:"element",offset:[1,0],content:function(a){a=$(a);return a.data("tooltipsy-content")!==f?a.data("tooltipsy-content"):a.next(".tooltipsy-content").html()},className:"tooltipsy",show:function(a,b){b.fadeIn(100)},hide:function(a,b){b.fadeOut(100)},delay:200,css:{overflow:"visible !important"}},e={position:"right",content:null};a.click(function(a){a.preventDefault()}).each(function(){var a=$(this),c=$.extend(!0,{},b),g=
{},k;for(k in e)a.data(("tooltipsy-"+k).toLowerCase())!==f&&(g[k]=a.data(("tooltipsy-"+k).toLowerCase()));g=$.extend({},e,g,d);"left"==g.position&&(c.offset=[-1,0],c.className="tooltipsy-alt");null!==g.content&&(c.content=g.content);a.tooltipsy(c)})}})(window.JC.massdrop=window.JC.massdrop||{});(function(c,f){function a(a){return{loadmore:function(){return $(".comments-list").length?{items:$(".comments-list").first().clone(),more:!0}:$.get("/ajax-snippets/load-more-products.json")},favourite:function(){return!0},signUp:function(){return{action:"categories"}},signIn:function(){return{action:"refresh"}},categorySelect:function(){return{action:"refresh"}}}[a]()}c.loadAjaxContent=function(d){d.find(".load-more").on("click",function(b){b.preventDefault();var e=$(this);b=e.attr("href");e.hasClass("waiting")||
(e.addClass("waiting"),$.ajax({url:b,type:"GET",success:function(b,d,g){$.when(a("loadmore")).then(function(a){var b=$(a.items).wrap("<div class='ajax-loaded-content' />").parent().hide();$(e.data("attach_point")).append(b.fadeIn());c.init(b);a.more||e.hide()})},complete:function(){e.removeClass("waiting")}}))})}})(window.JC.massdrop=window.JC.massdrop||{});(function(c,f){c.makeSimpleCarousel=function(a){a.find(".carousel").each(function(a,b){var e=$(b);if(!(1>=e.children().length)){var c=Handlebars.compile("<div id='CarPrev' class='carousel-control ico-link carousel-prev ir'>previous</div><div id='CarNext' class='ico-link carousel-control carousel-next ir'>next</div>");e.after(c).cycle({prev:"#CarNext",next:"#CarPrev",timeout:0,speed:200})}})}})(window.JC.massdrop=window.JC.massdrop||{});(function(c,f){c.manageFavourites=function(a){var c=function(a,b){var c=$("[data-pair='"+a.data("pair")+"']");b?(c.addClass("favourited"),c.text("Requested!")):(c.removeClass("favourited"),c.text("Request"))},b=function(a,b){c(a,!b);$ajaxCall=$.ajax({url:WEB_ROOT_ABS+"api/favorite",dataType:"json",type:"POST",data:{pair:a.data("pair"),removeLink:b}});$ajaxCall.success(function(b){c(a,b.favourited)})};a.find(".ico-favourite").on("click",function(a){a.preventDefault();a=$(this);var c=a.hasClass("favourited");
b(a,c)}).each(function(){c($(this),$(this).hasClass("favourited"))})}})(window.JC.massdrop=window.JC.massdrop||{});(function(c,f){c.modalWindows={bindCloseModal:function(){$("#colorbox").on("click",".close-modal",function(a){a.preventDefault();$.colorbox.close()})},loadPollProduct:function(){var a=Handlebars.compile("<div class='modal-content'><div class='col-50'><div class='img-container' style='background-color: #fff'><img src='{{img_path}}' width='450px' alt='Product Image'/></div></div><div class='col-50 poll-product-details'><div class='product-header'><h2>{{ title }}</h2><div class='suggested-by'>{{{suggested_by}}}</div></div>{{{price}}}{{{man_site}}}<div class='product-description user-text' {{#if prod_description}}style='margin-bottom:20px;'{{/if}}>{{{prod_description}}}</div>{{#if vote}}<a data-product_id='{{vote.id}}' href='#' style='width:225px' class='vote-this btn ico-btn btn-full {{vote.selected}} {{vote.disabled}}'>{{vote.copy}}</a>{{else}}<div class='callout-box callout-unavailable'>We have reached out to vendors regarding this product. Unfortunately, they either did not offer a significant discount or were not interested in working with us at this time.<br><br>Changing your vote to support other options or adding options for less well-known products will allow us to refine our negotiations on your behalf.</div>{{/if}}</div></div>"),
c,b;c=function(b){b=b.parents(".product-card");var c=b.find(".vote-this").clone(),d=b.data("price");""!=d&&0<d?(d=parseFloat(d).toFixed(2).split("."),d="<span class='current-price'><sup>$</sup>"+d[0]+"<sup>."+d[1]+"</sup><span class='demph'>MSRP pricing</span></span>"):d="";var g=b.data("url");""!=g&&(g="<a href='"+g+"' rel='nofollow' target='_blank' class='ico-small ico-external'>Product Page</a>");d={img_path:b.find(".img-product").data("retina"),prod_description:b.data("description"),man_site:g,
price:d,title:b.find(".product-name").text(),suggested_by:b.find(".suggested-by").html()};0<c.length&&(d.vote={copy:c.text(),selected:c.hasClass("selected")?"selected":null,disabled:c.hasClass("disabled")?"disabled":null,id:b.attr("id")});$("#cboxLoadedContent").html(a(d))};b=function(a){$("#"+$(a).data("product_id")).find(".vote-this").trigger("click");$.colorbox.close()};$("#colorbox").on("click",".vote-this",function(a){a.preventDefault();b(a.currentTarget)});$(".open-modal").colorbox({onComplete:function(){c($(this))},
html:"<div class='load-more-container'><span class='btn load-more ico-btn ico-btn-load-more waiting'>Loading</span></div>",width:990,opacity:0.75,height:510,close:""})},flagModal:function(a){var c=Handlebars.compile(document.getElementById("tpl-flag").innerHTML);$.colorbox({html:c,close:"",opacity:0.75});c=$("#cboxContent");c.find(".form-cancel").click(function(a){a.preventDefault();$.colorbox.close()});a.find(".ico-flag").hasClass("flagged")?c.find(".btn-submit").text("Submitted").attr("disabled",
"disabled").addClass("disabled"):c.find(".btn-submit").click(function(b){b.preventDefault();a.find(".ico-flag").addClass("flagged");$.post(WEB_ROOT_ABS+"api/flag",{type:a.data("type"),id:a.data("id")});$.colorbox.close()})},loadFormModal:function(a,c){$.colorbox({html:a,close:"",opacity:0.75,onClosed:function(){c.removeClass("form-activated")},onComplete:function(){var a=$("#colorbox").find("input, select, textarea");0<a.length&&a[0].focus()}});$("#colorbox").on("click",".form-cancel",function(a){a.preventDefault();
$.colorbox.close()})},loadConfirmModal:function(a){$.colorbox({html:a,close:""});$("#colorbox").on("click",".btn-submit",function(a){a.preventDefault();$("#"+$(a.currentTarget).data("form_id")).trigger("confirm-action")})},userNameModal:function(a){var c=function(b){$.ajax({data:{username:b},dataType:"json",url:WEB_ROOT_ABS+"api/username/set",success:function(b){$colorbox=$("#cboxContent");$colorbox.find(".modal-content").html("<div><p>Congratulations, now whenever you post on Massdrop your name will show up as <strong>"+
b.username+"</strong></p></div>").append($('<a class="btn" style="margin-top: 30px">').text("Ok").click(function(){$.colorbox.close();"function"==typeof a&&a(b)}));$.colorbox.resize();$("#UserSettingsForm #input-user_name").replaceWith($("<div/>").text(b.username));$(".require-username").removeClass("require-username");$(".username-callout").slideUp("fast",function(){$(this).remove()})},error:function(a){a=JSON.parse(a.responseText).error;$("#cboxContent").find(".form-field").addClass("error");$("#cboxContent").find(".form-field .form-messages").text(a);
$.colorbox.resize()}})},b=Handlebars.compile($("#tpl-username-modal").html());$.colorbox({html:b(),height:386,width:450,close:"",onComplete:function(a,b,f){var g=$("#cboxContent");g.find("input[name=username]").on("keydown",function(){g.find(".form-field").removeClass("error")});g.find("input[name=username]")[0].focus();var k=Handlebars.compile('<li><a href="#">{{suggestion}}</a></li>');$.ajax({url:WEB_ROOT_ABS+"api/username/suggestions",dataType:"json",success:function(a){g.find(".suggestions").empty();
$(a).each(function(a,b){g.find(".suggestions").append($(k({suggestion:b})).click(function(){g.find("input[name=username]").val(b).focus()}))});$.colorbox.resize()}});g.find("form").submit(function(a){a.preventDefault();c(g.find("input[name=username]").val(),g)})}})}}})(window.JC.massdrop=window.JC.massdrop||{});$.fn.thresholds=function(){var c=this[0];1<this.length&&console.warn("thresholds only works on the first element, "+this.length+" given");if(0!=this.length){for(var f=function(a,b,c,d){if(d==b.length)return-0.5*p+q;c=c||0;d=d||0;var e=b[d];return a==e?t-0.5*p+q:a<e?(a-c)/(e-c)*(t-p):t+f(a,b,e,d+1)},a=function(a,b){var c;c=Math.min(a-b/2,m-b);return c=Math.max(0,c)},d=JSON.parse(c.dataset.dropInfo),b=d.thresholds,e=d.purchases,l=d.commits,d=d.prices,n=$('<span class="purchase-flag" />').css({}).text(e+
" purchased").appendTo(c),g=$('<span class="commit-flag"/>').css({}).text(l+" committed").appendTo(c),k=c.offsetHeight,m=c.offsetWidth,p=parseInt(c.dataset.thresholdDimension)||65,r=parseInt(c.dataset.barHeight)||20,q=parseInt(c.dataset.thresholdBorder)||3,B="true"==c.dataset.showFlags,E="true"==c.dataset.showThresholdText,t=m/b.length,u=f(e,b),v=f(e+l,b),s=(k-r)/2,k=(k-p+2*q)/2,C=[],h=0;h<b.length;h++)C.push(h==b.length-1?m-p+2*q:0==b[h]?0:t*(h+1)-(p-2*q));var z=n.width(),w=n.height(),z=a(u,z),x=
k-w-10,h=g.width();g.height();var A=k+p,a=a(v,h),c=$(c);c.css("position","relative");c.append($('<div class="purchase-bar" />').css({width:u,height:r,top:s}));c.append($('<div class="commits-bar" />').css({width:v,height:r,top:s}));c.append($('<div class="ghost-bar" />').css({width:m,height:r,top:s}));for(h=0;h<b.length;h++){var D=e>=b[h],y=$('<div class="threshold" />').css({left:C[h],top:k,width:p-2*q,height:p-2*q,"border-width":q,"border-style":"solid"});y.addClass(D?"reached":"not-reached");E&&
(y.append($('<div class="price" />').css({}).html("$"+d[h])),y.append($('<strong class="needed" />').html(D?"unlocked":b[h]+" needed").css({})));c.append(y)}B?(n.css({top:x,left:z}),c.append($('<div class="purchase-arrow" />').css({top:x+w+4,left:Math.max(0,u-5)})),c.append($('<div style="border-left: 1px dashed #88c100; position: absolute" />').css({top:x+w,left:Math.max(0,u-5)+4,height:s-x-w,opacity:0.5}))):n.remove();B&&0<l?(g.css({top:A,left:a}),c.append($('<div class="commit-arrow"/>').css({top:A-
5,left:Math.max(0,v-5)})),c.append($('<div style="border-left: 1px dashed #b3b3b3; position: absolute"/>').css({top:s+r/2,left:Math.max(0,v-5)+4,height:A-(s+r/2),opacity:0.5}))):g.remove()}};(function(c,f){c.signedOutModals={init:function(){$(".sign-in-trigger").on("click",function(a){a.preventDefault();c.signedOutModals.logInModal()});$(".sign-up-trigger").on("click",function(a){a.preventDefault();c.signedOutModals.signUpModal()});$(".sign-up-trigger-no-diagrams").on("click",function(a){a.preventDefault();c.signedOutModals.signUpModalNoDiagram()});$("#Categories").on("click",function(a){a.preventDefault();c.signedOutModals.categorySelectModal({width:555})});$(".invite-friends-trigger").on("click",
function(a){a.preventDefault();c.signedOutModals.inviteFriendsModal()});$(".out-of-vote-trigger").on("click",function(a){a.preventDefault();c.signedOutModals.outOfVoteModal()})},submitModalForm:function(a,c,b){c=c.serialize();c+="&formName="+encodeURIComponent(a);$.ajax({url:WEB_ROOT_ABS+"api/modal",dataType:"json",type:"POST",data:c,success:function(a,c,d){b(a)},complete:function(a){}})},interpretModalResponse:function(a){var d=$("#colorbox");switch(a.action){case "refresh":document.location.reload(!0);
break;case "categories":c.signedOutModals.categorySelectModal({width:555});break;case "close":$.colorbox.close();break;case "poll_submit":window.location="/vote/upcoming/";break;case "success":d.find(".error-form").show().text(a.message);d.find(".btn-submit").addClass("disabled").attr("disabled","disabled").removeClass("waiting").text("Requested");d.find("input, select, textarea").hide();$.colorbox.resize();break;case "error":d.find("input").removeClass("error").parent().removeClass("error"),a.fields.forEach(function(a){d.find("input[name='"+
a+"']").addClass("error").parent().addClass("error")}),d.find("input[name='"+a.fields[0]+"']").focus(),d.find(".btn-submit").removeClass("waiting"),d.find(".error-form").show().text(a.message),$.colorbox.resize()}},modalLoadedTasks:function(){$("#colorbox").find("input, textarea").placeholder();"undefined"!=typeof FB&&null!=FB&&FB.XFBML.parse();c.initializeToolTips($("#colorbox").find(".hastip"));formHelpers.initializeFormValidation($("#colorbox").find("form.validate"))},interpretModalOptions:function(a,
d,b){b||(b={closable:!0,width:600});this.options=$.extend(b,a);a={html:d,close:"",opacity:0.75,onComplete:function(){$inputElems=$("#colorbox").find("input, select, textarea");0<$inputElems.length&&$inputElems[0].focus();c.signedOutModals.modalLoadedTasks()},width:this.options.width};this.options.closable||(a.overlayClose=!1,a.escKey=!1,a.onOpen=function(){$("#cboxClose").remove()});$("body").on("fonts-loaded",function(){"none"!=$("#colorbox").css("display")&&$.colorbox.resize()});return a},logInModal:function(a){var d=
Handlebars.compile(document.getElementById("tpl-signin").innerHTML);colorboxParams=c.signedOutModals.interpretModalOptions(a,d);$.colorbox(colorboxParams);var b=$("#cboxContent");b.find("[name=email]").val($("#autocomplete-email").val());b.find("[name=password]").val($("#autocomplete-password").val());b.find(".sign-up-link").click(function(b){b.preventDefault();c.signedOutModals.signUpModal(a)});b.find(".password-reset").click(function(d){d.preventDefault();c.signedOutModals.passwordResetRequestModal(b.find("[name='email']").val(),
a)});b.find(".btn-submit").click(function(a){$("#form-target").length||a.preventDefault();$(this).addClass("waiting");c.signedOutModals.submitModalForm("signIn",$(this).closest("form"),function(a){c.signedOutModals.interpretModalResponse(a)})})},signUpModal:function(a){var d=Handlebars.compile(document.getElementById("tpl-signup").innerHTML);colorboxParams=c.signedOutModals.interpretModalOptions(a,d);$.colorbox(colorboxParams);d=$("#cboxContent");d.find(".sign-in-link").click(function(b){b.preventDefault();
c.signedOutModals.logInModal(a)});d.find(".btn-submit").click(function(a){a.preventDefault();$(this).addClass("waiting");c.signedOutModals.submitModalForm("signUp",$(this).closest("form"),function(a){c.signedOutModals.interpretModalResponse(a)})})},signUpModalNoDiagram:function(a){var d=Handlebars.compile(document.getElementById("tpl-signup-no-diagram").innerHTML);colorboxParams=c.signedOutModals.interpretModalOptions(a,d);$.colorbox(colorboxParams);d=$("#cboxContent");d.find(".sign-in-link").click(function(b){b.preventDefault();
c.signedOutModals.logInModal(a)});d.find(".btn-submit").click(function(a){a.preventDefault();$(this).addClass("waiting");c.signedOutModals.submitModalForm("signUp",$(this).closest("form"),function(a){c.signedOutModals.interpretModalResponse(a)})})},signUpModalLock:function(a){},passwordResetRequestModal:function(a,d){var b=Handlebars.compile(document.getElementById("tpl-resetrequest").innerHTML);colorboxParams=c.signedOutModals.interpretModalOptions(d,b);$.colorbox(colorboxParams);b=$("#cboxContent");
b.find("[name='email']").val(a);b.find(".sign-up-link").click(function(a){a.preventDefault();c.signedOutModals.signUpModal(d)});b.find(".btn-submit").click(function(a){a.preventDefault();$(this).addClass("waiting");c.signedOutModals.submitModalForm("resetRequest",$(this).closest("form"),function(a){c.signedOutModals.interpretModalResponse(a)})})},categorySelectModal:function(a){var d=Handlebars.compile(document.getElementById("tpl-categoryselect").innerHTML);colorboxParams=c.signedOutModals.interpretModalOptions(a,
d);$.colorbox(colorboxParams);$("#category-select-modal").on("click",".btn-submit",function(a){a.preventDefault();$("#category-select-modal button.btn-submit").addClass("waiting");c.signedOutModals.submitModalForm("categorySelect",$(this).closest("form"),function(a){c.signedOutModals.interpretModalResponse(a)})});$("#category-select-modal").on("click",".skip-step",function(a){});(function(){$("#category-select-modal li").each(function(){var a=$(this),c=a.find("input[type=checkbox]");c.is(":checked")&&
a.addClass("active");a.on("click",function(){c.is(":checked")?(c.removeAttr("checked"),a.Class("active")):(c.attr("checked","checked"),a.addClass("active"))})})})()},inviteFriendsModal:function(a){a=Handlebars.compile(document.getElementById("tpl-invitefriends").innerHTML);$.colorbox({html:a,close:""})},outOfVoteModal:function(a){var d=Handlebars.compile(document.getElementById("tpl-getmorevotes").innerHTML);$.colorbox({html:d,close:""});$("#cboxContent").find(".referral-link").click(function(b){b.preventDefault();
c.signedOutModals.inviteFriendsModal(a)})},registerSuccessModal:function(){var a=Handlebars.compile('<div class="modal-content success-message"><h2>Success!</h2><p>your account has been created.</p></div>');$.colorbox({html:a,close:"",opacity:0.75})},loginSuccessModal:function(){Handlebars.compile('<div class="modal-content">success (log in)</div>')}}})(window.JC.massdrop=window.JC.massdrop||{});(function(c,f){c.simpleTimer=function(a,c,b){var e=Handlebars.compile("<div class='plain-timer live-timer' style='position:relative;top:24px;left:10px;'><div class='time-container'><div class='time-unit days'>{dnn}</div><div class='timer-label'>{dl}</div></div>:<div class='time-container'><div class='hours time-unit'>{hnn}</div><div class='timer-label'>{hl}</div></div>:<div class='time-container'><div class='time-unit minutes'>{mnn}</div><div class='timer-label'>{ml}</div></div></div>"),f=Handlebars.compile("<div class='time-up'>Time's up!</div>"),
n="years months weeks Days Hours Minutes Seconds".split(" ");(function(){$.countdown.setDefaults({format:"DHMS",labels:n,expiryText:f({}),layout:e({}),tickInterval:60,onExpiry:function(){location.reload()}})})();(function(){$(".time-remaining").each(function(a,b){var c=$(b).addClass("active-timer"),d=parseInt(c.data("endtime"),10);c.countdown({until:+d})})})()}})(window.JC.massdrop=window.JC.massdrop||{});(function(c,f){c.stickySideBar=function(a){if(0!=a.length){var c=$(window),b=a.width(),e=a.offset().top;a.data("top",e);a.width(b);$("body").on("content-changed",function(){a.data("top",a.offset().top);c.trigger("scroll")});c.scroll(function(b){c.scrollTop()>a.data("top")?(a.addClass("sticky-fixed"),a.css("top",0)):a.removeClass("sticky-fixed")})}}})(window.JC.massdrop=window.JC.massdrop||{});(function(c){c.fn.talkScroller=function(f){f=f||{};var a=c(this),d=f.category,b="undefined"==typeof f.showUnread?!1:f.showUnread,e=1,l=function(){if(!0==f)console.log("ajax guard ");else{var f=!0;c.ajax({url:WEB_ROOT_ABS+"api/talk/html/"+e,data:{category:d,showUnread:b},responseType:"html",success:function(b){a.append(b);setTimeout(function(){f=!1},100)}});e+=1}};l();c(window).on("scroll",function(){c(window).scrollTop()+c(window).height()+50>c("body").height()&&l()});return this}})(jQuery);(function(c,f){c.toggleContainer=function(a){a=a||$("body");a=a.find(".toggle-container");a.children(".toggle-content").hide();a.on("click",".container-trigger",function(a){a.preventDefault();var b=$(a.currentTarget),c=b.parents(".toggle-container");c.hasClass("container-open")?(b.hide(),c.removeClass("container-open").find(".toggle-content").slideUp(function(){$("body").trigger("content-changed");b.text($.data(a.currentTarget,"open")).show()})):(b.hide(),c.addClass("container-open").find(".toggle-content").slideDown(function(){$("body").trigger("content-changed");
$.data(a.currentTarget,"open")||$.data(a.currentTarget,"open",b.text());b.text(b.data("closed")).show()}))})}})(window.JC.massdrop=window.JC.massdrop||{});
